<html>
    <head>
        <title>Using Ajax in Vue</title>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.3.4/vue.js"></script>
    </head>

    <body>
        <div id="app">
            <div class="container">
                <h1>Let's hear some stories!</h1>
                <ul class="list-group">
                    <story v-for="story in stories" :key="story" :story="story"></story>
                </ul>
            
                <!-- display data for debugging -->
                <pre>
                    <code>
                        {{$data}}
                    </code>
                </pre>
            </div>
        </div>
    </body>
    
    <template id="story-template">
        <li class="list-group-item">
            {{ story.writer }} said "{{ story.plot}}"
        </li>
    </template>

    <script type="text/javascript">
        Vue.component("story", {
            template: "#story-template",
            props: [ "story" ]
        });

        var vm = new Vue({
            el: "#app",
            data: {
                stories: [
                    // {
                    //     plot: "My horse is amazing.",
                    //     writer: "Mr. Weebl",
                    // },
                    // {
                    //     plot: "Narwhals invented Shish Kebab.",
                    //     writer: "Mr. Weebl",
                    // },
                    // {
                    //     plot: "The dark side of the Force is stronger.",
                    //     writer: "Darth Vader",
                    // },
                    // {
                    //     plot: "One does not simply walk into Mordor.",
                    //     writer: "Boromir",
                    // },
                ],
            },
            mounted: function () {
                axios.get("http://localhost:3000/api/stories")
                .then(function (response) {
                    Vue.set(vm, "stories", response.data)
                })
                .catch(function (e) {
                    console.error(e);
                })
            }
        });
    </script>
</html>